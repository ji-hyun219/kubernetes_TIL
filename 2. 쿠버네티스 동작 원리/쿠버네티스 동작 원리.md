### 쿠버네티스 동작 원리

1. `docker push`해서 도커 허브에 저장해놓는다. 이때 public 일 수도 있고 private 일 수도 있다.
   이런 컨테이너, 저런 컨테이너들을 푸시한다.

2. 쿠버네티스 명령어를 통해 이 컨테이너가 실행될 수 있게 한다. 이때 yaml 포맷도 가능하고 cli 도 가능하다.

3. 아래 명령어는 hub.example.com 이라는 공간에 있는 nginx 컨테이너를 실행하라는 뜻이다. 이때 depoly 이름이어야 한다.

```
kuberctl create deploy web --image=hub.example.com/nginx
```

4. 마스터 노드는 `컨트롤 플레인`이라는 용어로 더 많이 쓰인다. 컨트롤 플레인 API 에게 요청을 보내면 nginx 를 어디 워커 노드에게 배치하면 좋을지 `스케쥴러`가 그것을 결정한다.

5. 스케쥴러는 노드 상태를 살펴보고 어디의 노드가 적당할지 응답해준다. 그리고 적당한 노드에게 'nginx' 하나를 실행하라고 명령을 보낸다.

6. 그럼 워커 노드 안에 있는 `kublet` 이 도커 명령으로 바꾸어서 도커 데몬에게 실제 컨테이너(nginx) 를 실행 요청을 하게 된다.

7. 그럼 도커 데몬은 도커 허브에 있는 nginx 컨테이너가 있는지 검색한 다음에, 그것을 받아와서 컨테이너로 실행하게 한다. 그리고 쿠버네티스는 그걸 `pod` 단위로 관리하게 되는 것이다.

여기까지가 컨테이너를 빌드해서 컨테이너를 저장하고 k8s 로 실행했을 때의 과정이다.
